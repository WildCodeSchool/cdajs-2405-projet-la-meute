import{j as n}from"./jsx-runtime-DR9Q75dM.js";import{B as p}from"./Button-q5UOKopa.js";import{r as c,R as a}from"./index-DRjF_FHU.js";import"./index-Bmt1039H.js";import"./index-CxRLcT2J.js";const m=""+new URL("logo-pawplanner-symbol-beige-BK9ukH99.svg",import.meta.url).href;function f({variant:s="confirm",type:t="info",children:l,isOpen:r,onClose:o,filePreview:d=null,selectMenu:g,onSelectChange:h}){const v=c.useRef(null),[u,y]=c.useState(null),w={success:m,info:m,warning:m},x=a.Children.toArray(l).filter(e=>a.isValidElement(e)&&e.type==="p"),j=a.Children.toArray(l).filter(e=>a.isValidElement(e)&&e.type===p);if(x.length===0||j.length===0)throw new Error("Modal requires both a paragraph (<p>) and a Button component as children");c.useEffect(()=>{const e=v.current;e&&(r?e.showModal():e.close())},[r]),c.useEffect(()=>{if(d){const e=URL.createObjectURL(d);return y(e),()=>{URL.revokeObjectURL(e)}}y(null)},[d]);const C=e=>{const i=e.currentTarget.getBoundingClientRect();(e.clientY<i.top||e.clientY>i.bottom||e.clientX<i.left||e.clientX>i.right)&&o()},R=e=>{h&&h(e.target.value)};return n.jsxs("dialog",{ref:v,className:`modal modal--${t} modal--${s}`,onClick:C,onKeyDown:()=>"",children:[n.jsx("img",{src:u||w[t],alt:u?"selected file":`${t} icon`,className:"modal__picture"}),n.jsx("div",{className:"modal__prompt",children:x}),g&&n.jsxs("select",{id:"selected",name:"selected",className:"modal__selectInput",onChange:R,children:[n.jsx("option",{value:"",children:"Sélectionnez une option"}),g.map(e=>n.jsx("option",{value:e,children:e},e))]}),n.jsxs("div",{className:"modal__actions",children:[n.jsx("button",{type:"button",className:"modal__actions--cancel",onClick:o,children:"Annuler"}),j]})]})}f.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{variant:{required:!1,tsType:{name:"literal",value:'"confirm"'},description:"",defaultValue:{value:'"confirm"',computed:!1}},type:{required:!1,tsType:{name:"union",raw:'"success" | "info" | "warning"',elements:[{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'}]},description:"",defaultValue:{value:'"info"',computed:!1}},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},filePreview:{required:!1,tsType:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},selectMenu:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const T={title:"molecules/Modal",tags:["autodocs"],component:f,decorators:[s=>n.jsx("div",{style:{width:"100%"},children:n.jsx(s,{})})]},_={args:{variant:"confirm",type:"info",isOpen:!0,onClose:()=>console.log("Modal closed")}};_.render=function(t){const[l,r]=a.useState(t.isOpen),o=()=>{r(!1),t.onClose()};return n.jsxs(n.Fragment,{children:[n.jsx(p,{style:"btn-dark",onClick:()=>r(!0),children:"Ouvrir Modal"}),n.jsxs(f,{...t,isOpen:l,onClose:o,children:[n.jsx("p",{children:"Êtes-vous sûr de vouloir continuer cette action?"}),n.jsx(p,{style:"btn-dark",onClick:o,children:"Confirmer"})]})]})};const E=["ConfirmModal"];export{_ as ConfirmModal,E as __namedExportsOrder,T as default};
